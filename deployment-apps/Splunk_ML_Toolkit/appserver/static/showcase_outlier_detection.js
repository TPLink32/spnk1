webpackJsonp([14],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg+"/@"+window.$C.BUILD_NUMBER,window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/app/Splunk_ML_Toolkit/")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__(48),__webpack_require__("splunkjs/mvc/chartview"),__webpack_require__("splunkjs/mvc/checkboxview"),__webpack_require__("splunkjs/mvc/dropdownview"),__webpack_require__(229),__webpack_require__("splunkjs/mvc/utils"),__webpack_require__("splunkjs/mvc/visualizationregistry"),__webpack_require__(230),__webpack_require__(234),__webpack_require__(237),__webpack_require__(236),__webpack_require__(240),__webpack_require__(242),__webpack_require__(241),__webpack_require__(44),__webpack_require__(243),__webpack_require__(266),__webpack_require__(246),__webpack_require__(291),__webpack_require__(292),__webpack_require__(249),__webpack_require__(261),__webpack_require__(235),__webpack_require__(239),__webpack_require__(250),__webpack_require__(251)],__WEBPACK_AMD_DEFINE_RESULT__=function(_jquery,_underscoreMltk,_chartview,_checkboxview,_dropdownview,_tableview,_utils,_visualizationregistry,_Master,_DrilldownLinker,_Messages,_QueryHistoryTable,_SearchStringDisplay,_compactTemplateString,_ColorPalette,_Options,_ShowcaseHistorySerializer,_ControlValidityStore,_NumberValidator,_TimestampValidator,_OutlierAlertModal,_EnhancedMultiDropdownView,_EnhancedTextInputView,_Forms,_Searches,_TableUtils,_BaseAssistantView){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var _jquery2=_interopRequireDefault(_jquery),_underscoreMltk2=_interopRequireDefault(_underscoreMltk),_chartview2=_interopRequireDefault(_chartview),_checkboxview2=_interopRequireDefault(_checkboxview),_dropdownview2=_interopRequireDefault(_dropdownview),_tableview2=_interopRequireDefault(_tableview),_utils2=_interopRequireDefault(_utils),_visualizationregistry2=_interopRequireDefault(_visualizationregistry),_Master2=_interopRequireDefault(_Master),DrilldownLinker=_interopRequireWildcard(_DrilldownLinker),Messages=_interopRequireWildcard(_Messages),_QueryHistoryTable2=_interopRequireDefault(_QueryHistoryTable),_compactTemplateString2=_interopRequireDefault(_compactTemplateString),_Options2=_interopRequireDefault(_Options),_ShowcaseHistorySerializer2=_interopRequireDefault(_ShowcaseHistorySerializer),_ControlValidityStore2=_interopRequireDefault(_ControlValidityStore),NumberValidator=_interopRequireWildcard(_NumberValidator),_OutlierAlertModal2=_interopRequireDefault(_OutlierAlertModal),_EnhancedMultiDropdownView2=_interopRequireDefault(_EnhancedMultiDropdownView),_EnhancedTextInputView2=_interopRequireDefault(_EnhancedTextInputView),Forms=_interopRequireWildcard(_Forms),Searches=_interopRequireWildcard(_Searches),TableUtils=_interopRequireWildcard(_TableUtils),_BaseAssistantView2=_interopRequireDefault(_BaseAssistantView),_slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_templateObject=_taggedTemplateLiteral(["| kvstorelookup ",'\n                                       | eval Actions = actions,\n                                         "Search query" = search_query,\n                                         "Field to analyze" = outlier_variable,\n                                         "Threshold method" = threshold_method,\n                                         "Threshold multiplier" = threshold_multiplier,\n                                         "Sliding window" = window_size,\n                                         "Include current point" = if(use_current_point == "0", "false", "true"),\n                                         "Split by" = split_by_fields,\n                                         "# of outliers" = outliers_count'],["| kvstorelookup ",'\n                                       | eval Actions = actions,\n                                         "Search query" = search_query,\n                                         "Field to analyze" = outlier_variable,\n                                         "Threshold method" = threshold_method,\n                                         "Threshold multiplier" = threshold_multiplier,\n                                         "Sliding window" = window_size,\n                                         "Include current point" = if(use_current_point == "0", "false", "true"),\n                                         "Split by" = split_by_fields,\n                                         "# of outliers" = outliers_count']),_templateObject2=_taggedTemplateLiteral(['| loadjob $searchBarSearchJobIdToken$\n                               | head 1\n                               | transpose\n                               | fields column\n                               | search column != "column" AND column != "_*"'],['| loadjob $searchBarSearchJobIdToken$\n                               | head 1\n                               | transpose\n                               | fields column\n                               | search column != "column" AND column != "_*"']),_templateObject3=_taggedTemplateLiteral(['| loadjob $outlierVariableSearchToken$\n                                           | search column != "column" AND column != $outlierVariableToken|s$ AND (column != "_*" OR column = "_time")'],['| loadjob $outlierVariableSearchToken$\n                                           | search column != "column" AND column != $outlierVariableToken|s$ AND (column != "_*" OR column = "_time")']),OutlierDetectionView=_BaseAssistantView2["default"].extend({headerOptions:{title:"Detect Numeric Outliers",description:"Find values that differ significantly from previous values."},tabOptions:{primaryTabTitle:"Detect Outliers",historyTabTitle:"Load Existing Settings"},submitButtonText:"Detect Outliers",searchBarTooltip:"The events returned should contain at least one numeric field.",render:function(){function getOutlierDetectionType(){return Forms.getToken("thresholdMethodToken")+(Forms.getToken("windowedAnalysisToken")?"_Windowed":"")}function getFullSearchQueryArray(){var outliersFilterType=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"both",fullSearchQueryArray=[],outlierSearchQuery=outlierSearchSettings[getOutlierDetectionType()],baseSearchString=self.model.searchInfo.get("baseSearchString");if(null!=baseSearchString&&null!=outlierSearchQuery){fullSearchQueryArray[0]=baseSearchString;for(var i=0;i<outlierSearchQuery.search.length;i++)fullSearchQueryArray[i+1]=outlierSearchQuery.search[i];fullSearchQueryArray.push(outlierFieldSearchStrings[outliersFilterType])}return fullSearchQueryArray}function getFullSearchQueryComments(){return[null].concat(outlierSearchSettings[getOutlierDetectionType()].description,["mark values outside the bounds as outliers"])}function updateForm(newIsRunningValue){null!=newIsRunningValue&&(isRunning=newIsRunningValue),outlierVariableControl.settings.set("disabled",isRunning),thresholdMethodControl.settings.set("disabled",isRunning),thresholdMultiplierControl.settings.set("disabled",isRunning),windowedAnalysisCheckboxControl.settings.set("disabled",isRunning);var windowingControlsEnabled=isRunning||!windowedAnalysisCheckboxControl.val();if(windowSizeControl.settings.set("disabled",windowingControlsEnabled),currentPointCheckboxControl.settings.set("disabled",windowingControlsEnabled),splitByFieldsControl.settings.set("disabled",isRunning),isRunning)self.assistantFormView.footer.setDisabled(!0,"Detecting Outliers...");else{var outlierVariableToken=Forms.getToken("outlierVariableToken"),fieldsValid=null!=outlierVariableToken&&outlierVariableToken.length>0;self.assistantFormView.footer.setDisabled(!fieldsValid)}}function getVizQuery(){var sharedSearchArray=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],outliersFilterType=arguments[1],vizQueryArray=getFullSearchQueryArray(outliersFilterType).concat(sharedSearchArray),vizQuerySearch=DrilldownLinker.createSearch(vizQueryArray,self.model.searchInfo.get("baseTimerange"));return[vizQueryArray,vizQuerySearch]}function setCurrentSampleSearch(sampleSearch){currentSampleSearch=_underscoreMltk2["default"].extend({},{thresholdMethod:"Avg",thresholdMultiplier:2,useCurrentPoint:!0},sampleSearch);var isWindowed=null!=currentSampleSearch.windowSize&&currentSampleSearch.windowSize>0;thresholdMethodControl.val(currentSampleSearch.thresholdMethod),thresholdMultiplierControl.val(currentSampleSearch.thresholdMultiplier),windowedAnalysisCheckboxControl.val(isWindowed),windowSizeControl.val(isWindowed?currentSampleSearch.windowSize:0),currentPointCheckboxControl.val(currentSampleSearch.useCurrentPoint),self.assistantFormView.searchBarControl.setProperties(currentSampleSearch.value,currentSampleSearch.earliestTime,currentSampleSearch.latestTime),null==currentSampleSearch.outlierVariable&&(currentSampleSearch=null)}function updateWindowSize(){var isValid=!0,isWindowed=!1;return null!=windowSizeControl&&null!=windowedAnalysisCheckboxControl&&null!=currentPointCheckboxControl&&(isWindowed=windowedAnalysisCheckboxControl.val(),windowSizeControl.settings.set("disabled",!isWindowed),currentPointCheckboxControl.settings.set("disabled",!isWindowed),isValid=windowSizeControl.validate(),controlValidity.set(windowSizeControl.id,!isWindowed||isValid),updateForm()),isWindowed&&isValid?windowSizeControl.val():0}function updateExperiment(){self.addBasicExperimentInfo();var fields={searchStages:[{type:"main",settings:{algorithm:Forms.getToken("thresholdMethodToken"),params:[{threshold_multiplier:Forms.getToken("thresholdMultiplierToken"),window_size:Forms.getToken("windowedAnalysisToken")?Forms.getToken("windowSizeToken"):0,use_current_point:Forms.getToken("useCurrentPointToken"),split_by_fields:Forms.getToken("splitByFieldsToken")}],targetVariable:"",featureVariables:[Forms.getToken("outlierVariableToken")],modelName:""}}]};self.model.experiment.set(fields)}var _this=this,self=this;_BaseAssistantView2["default"].prototype.render.call(this);var _utils$getPageInfo=_utils2["default"].getPageInfo(),appName=_utils$getPageInfo.app,showcaseName=_utils$getPageInfo.page,currentSampleSearch=null,defaultVizHeight=_Options2["default"].getOptionByName("defaultVizHeight"),isRunning=!1,controlValidity=new _ControlValidityStore2["default"],historyCollectionId=showcaseName+"_history",historySerializer=new _ShowcaseHistorySerializer2["default"](historyCollectionId,{_time:null,search_query:null,earliest_time:null,latest_time:null,outlier_variable:null,threshold_method:null,threshold_multiplier:null,window_size:null,use_current_point:null,outliers_count:null,split_by_fields:null},function(){Searches.startSearch("queryHistorySearch")}),outlierSearchSettings={Avg_Windowed:{search:["| streamstats window=$windowSizeToken$ current=$useCurrentPointToken$ avg($outlierVariableToken|s$) as avg stdev($outlierVariableToken|s$) as stdev $splitByFieldsQueryToken$","| eval lowerBound=(avg-stdev*exact($thresholdMultiplierToken$)), upperBound=(avg+stdev*exact($thresholdMultiplierToken$))"],description:["calculate the mean and standard deviation using a sliding window","calculate the bounds as a multiple of the standard deviation"]},MAD_Windowed:{search:["| streamstats window=$windowSizeToken$ current=$useCurrentPointToken$ median($outlierVariableToken|s$) as median $splitByFieldsQueryToken$","| eval absDev=(abs('$outlierVariableToken$'-median))","| streamstats window=$windowSizeToken$ current=$useCurrentPointToken$ median(absDev) as medianAbsDev $splitByFieldsQueryToken$","| eval lowerBound=(median-medianAbsDev*exact($thresholdMultiplierToken$)), upperBound=(median+medianAbsDev*exact($thresholdMultiplierToken$))"],description:["calculate the median value using a sliding window","calculate the absolute deviation of each value from the median","use the same sliding window to compute the median absolute deviation","calculate the bounds as a multiple of the median absolute deviation"]},IQR_Windowed:{search:["| streamstats window=$windowSizeToken$ current=$useCurrentPointToken$ median($outlierVariableToken|s$) as median p25($outlierVariableToken|s$) as p25 p75($outlierVariableToken|s$) as p75 $splitByFieldsQueryToken$","| eval IQR=(p75-p25)","| eval lowerBound=(median-IQR*exact($thresholdMultiplierToken$)), upperBound=(median+IQR*exact($thresholdMultiplierToken$))"],description:["calculate the first, second, and third quartiles using a sliding window","calculate the interquartile range","calculate the bounds as a multiple of the interquartile range"]},Avg:{search:["| eventstats avg($outlierVariableToken|s$) as avg stdev($outlierVariableToken|s$) as stdev $splitByFieldsQueryToken$","| eval lowerBound=(avg-stdev*exact($thresholdMultiplierToken$)), upperBound=(avg+stdev*exact($thresholdMultiplierToken$))"],description:["calculate the mean and standard deviation","calculate the bounds as a multiple of the standard deviation"]},MAD:{search:["| eventstats median($outlierVariableToken|s$) as median $splitByFieldsQueryToken$","| eval absDev=(abs('$outlierVariableToken$'-median))","| eventstats median(absDev) as medianAbsDev $splitByFieldsQueryToken$","| eval lowerBound=(median-medianAbsDev*exact($thresholdMultiplierToken$)), upperBound=(median+medianAbsDev*exact($thresholdMultiplierToken$))"],description:["calculate the median","calculate the absolute deviation of each value from the median","use the same sliding window to compute the median absolute deviation","calculate the bounds as a multiple of the median absolute deviation"]},IQR:{search:["| eventstats median($outlierVariableToken|s$) as median p25($outlierVariableToken|s$) as p25 p75($outlierVariableToken|s$) as p75 $splitByFieldsQueryToken$","| eval IQR=(p75-p25)","| eval lowerBound=(median-IQR*exact($thresholdMultiplierToken$)), upperBound=(median+IQR*exact($thresholdMultiplierToken$))"],description:["calculate the first, second, and third quartiles","calculate the interquartile range","calculate the bounds as a multiple of the interquartile range"]}},outlierFieldSearchStrings={both:"| eval isOutlier=if('$outlierVariableToken$' < lowerBound OR '$outlierVariableToken$' > upperBound, 1, 0)",above:"| eval isOutlier=if('$outlierVariableToken$' > upperBound, 1, 0)",below:"| eval isOutlier=if('$outlierVariableToken$' < lowerBound, 1, 0)",split:"| eval isOutlierBelow=if('$outlierVariableToken$' < lowerBound, 1, 0), isOutlierAbove=if('$outlierVariableToken$' > upperBound, 1, 0)"};!function(){Searches.setSearch("queryHistorySearch",{searchString:(0,_compactTemplateString2["default"])(_templateObject,historyCollectionId)})}();var thresholdMethodControl=function(){var methodVariables={Avg:{deviation:"stdev",midPoint:"avg"},MAD:{deviation:"medianAbsDev",midPoint:"median"},IQR:{deviation:"IQR",midPoint:"median"}},control=new _dropdownview2["default"]({id:"thresholdMethodControl",el:_this.$el.find("#thresholdMethodControl"),labelField:"label",valueField:"value",showClearButton:!1,choices:[{value:"Avg",label:"Standard Deviation"},{value:"MAD",label:"Median Absolute Deviation"},{value:"IQR",label:"Interquartile Range"}]});return control.$el.prev("label").tooltip({title:"Select the method to use, depending on the characteristics of the data and the outliers you want to find. For example, Median Absolute Deviation is more robust to outliers than Standard Deviation."}),control.on("change",function(value){Forms.setToken("thresholdMethodToken",value),Forms.setToken("thresholdDeviationToken",methodVariables[value].deviation),Forms.setToken("thresholdMidpointToken",methodVariables[value].midPoint)}),control.render(),control}(),thresholdMultiplierControl=function(){var control=new _EnhancedTextInputView2["default"]({id:"thresholdMultiplierControl",el:_this.$el.find("#thresholdMultiplierControl"),validator:{type:"number",min:0,minExclusive:!0,message:"Multiplier must be a number greater than zero."}});return control.$el.prev("label").tooltip({title:"Adjust this value until the number of outliers matches your needs."}),controlValidity.set(control.id,!1),control.on("change",function(value){var valid=!control.settings.get("invalid");controlValidity.set(control.id,valid),valid&&Forms.setToken("thresholdMultiplierToken",value),updateForm()}),control.render(),control}(),windowSizeControl=function(){var control=new _EnhancedTextInputView2["default"]({id:"windowSizeControl",el:_this.$el.find("#windowSizeControl"),validator:{type:"number",min:0,minExclusive:!0,allowFloats:!1,message:"Number of samples must be a positive integer."}});return control.$el.prev(".checkbox").children("label").tooltip({title:"Use a sliding window if the distribution of your data changes frequently."}),control.on("change",function(){Forms.setToken("windowSizeToken",updateWindowSize())}),control.render(),control}(),windowedAnalysisCheckboxControl=function(){var control=new _checkboxview2["default"]({id:"windowedAnalysisCheckboxControl",el:_this.$el.find("#windowedAnalysisCheckboxControl"),value:!0});return control.on("change",function(isWindowed){updateWindowSize(),Forms.setToken("windowedAnalysisToken",isWindowed)}),control.render(),control}(),currentPointCheckboxControl=function(){var control=new _checkboxview2["default"]({id:"currentPointCheckboxControl",el:_this.$el.find("#currentPointCheckboxControl"),value:!0});return control.$el.next("label").tooltip({title:"When selected, the threshold method will include the current point in the statistical calculations before assessing whether it is an outlier."}),control.on("change",function(useCurrent){updateWindowSize(),Forms.setToken("useCurrentPointToken",useCurrent)}),control.render(),control}();this.$el.find("#"+windowSizeControl.getInputId()).after(currentPointCheckboxControl.$el.parent());var splitByFieldsControl=function(){function updateSplitByFields(){var splitByFields=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],isSplit=splitByFields.length>0;Forms.setToken("splitByFieldsToken",splitByFields);var splitByEvalPairs=splitByFields.map(function(splitByField){var fieldName=Forms.escape(" "+splitByField+"="),fieldValue="'"+splitByField+"'";return fieldName+" + "+fieldValue});Forms.setToken("splitByEvalToken",isSplit?"| eval _combined_split_by="+splitByEvalPairs.join(" + "):""),Forms.setToken("outliersOverTimeSplitByToken",isSplit?" by "+splitByEvalField:"");var escapedSplitByFields=splitByFields.map(Forms.escape);Forms.setToken("splitByFieldsQueryToken",isSplit?" by "+escapedSplitByFields.join(", "):""),Forms.setToken("splitByMacroToken",isSplit?"| `splitby("+escapedSplitByFields.join(", ")+")`":"")}var control=new _EnhancedMultiDropdownView2["default"]({id:"splitByFieldsControl",managerid:"splitByFieldsSearch",el:_this.$el.find("#splitByFieldsControl"),labelField:"column",valueField:"column",width:300,maximumSelectionSize:5,placeholder:"(optional)"});control.$el.prev("label").tooltip({title:"Select the categorical fields to split by. Outliers will be detected for each (combination of) distinct values."});var splitByEvalField="_combined_split_by";return control.on("change",updateSplitByFields),control.on("datachange datachange-zero",function(){var choices=Forms.getChoiceViewChoices(control);if(null!=currentSampleSearch){var validChoices=Forms.intersect(choices,currentSampleSearch.splitByFields,!0);control.val(validChoices)}updateSplitByFields(control.val()),null!=currentSampleSearch&&(currentSampleSearch.autostart!==!1?self.assistantFormView.footer.controls.submitButton.trigger("submit"):currentSampleSearch=null),0===choices.length&&setTimeout(function(){Messages.setDropdownMessage(control,"No fields available to split by.")},0)}),control.render(),control}(),outlierVariableControl=function(){var control=new _dropdownview2["default"]({id:"outlierVariableControl",managerid:"outlierVariableSearch",el:_this.$el.find("#outlierVariableControl"),labelField:"column",valueField:"column",showClearButton:!1});return control.$el.prev("label").tooltip({title:"Select the numeric field in which to detect outliers."}),control.on("datachange",function(){if(null!=currentSampleSearch){var choices=Forms.getChoiceViewChoices(control);choices.indexOf(currentSampleSearch.outlierVariable)>=0?control.val(currentSampleSearch.outlierVariable):currentSampleSearch=null}}),control.on("change",function(value){Forms.clearChoiceView(splitByFieldsControl),Forms.setToken("outlierVariableToken",value),updateForm()}),control.render(),control}();new _QueryHistoryTable2["default"](this.$el.find("#queryHistoryPanel"),"queryHistorySearch",historyCollectionId,["Actions","_time","Search query","Field to analyze","Threshold method","Threshold multiplier","Sliding window","Include current point","Split by","# of outliers"],this.submitButtonText,function(params,autostart){var sampleSearch={value:params.data["row.search_query"],earliestTime:params.data["row.earliest_time"],latestTime:params.data["row.latest_time"],outlierVariable:params.data["row.outlier_variable"],thresholdMethod:params.data["row.threshold_method"],thresholdMultiplier:params.data["row.threshold_multiplier"],windowSize:params.data["row.window_size"],useCurrentPoint:"0"!==params.data["row.use_current_point"],splitByFields:"string"==typeof params.data["row.split_by_fields"]?[params.data["row.split_by_fields"]]:params.data["row.split_by_fields"],autostart:autostart};setCurrentSampleSearch(sampleSearch),self.assistantFormView.tabs.activate("primaryTab")}).render();var outliersVizPanel=function(){var vizName="OutliersViz",OutliersViz=_visualizationregistry2["default"].getVisualizer(appName,vizName),assistantPanel=new _Master2["default"]({el:_this.$el.find("#outliersPanel"),title:"Data and Outliers",tooltip:"Values that fall outside the outlier bounds (shown in blue) are considered outliers (yellow dots). Adjust the threshold method or multiplier until the outliers match your expectations.",viz:OutliersViz,vizOptions:_defineProperty({id:"outliersViz",height:defaultVizHeight,managerid:"outliersVizSearch"},appName+"."+vizName+".onClick",function(point){if(!isNaN(point.y)){var yValue=null!=point.originalY?Forms.escape(point.originalY):Forms.escape(point.y),searchQuery=getFullSearchQueryArray().concat([" | search $outlierVariableToken|s$="+yValue]),search=DrilldownLinker.createSearch(searchQuery,self.model.searchInfo.get("baseTimerange"));window.open(DrilldownLinker.getUrl("search",search),"_blank")}}),footerButtons:{scheduleAlertButton:!0}});return assistantPanel}(),outliersOverTimeVizPanel=function(){var managerId="outliersOverTimeVizSearch",assistantPanel=new _Master2["default"]({el:_this.$el.find("#outliersOverTimePanel"),title:"Outlier Count Over Time",tooltip:"Shows the number of outliers over time.",viz:_chartview2["default"],vizOptions:{id:"outliersOverTimeViz",managerid:managerId,type:"column","charting.chart.stackMode":"stacked",drilldownRedirect:!1}});assistantPanel.viz.on("drilldown",function(e){e.event&&e.drilldown&&(e.event.modifierKey=!0,e.drilldown())});var splitOutliersLabel=(0,_jquery2["default"])('<label class="checkbox">');return splitOutliersLabel.insertAfter(assistantPanel.header),splitOutliersLabel.tooltip({title:"Shows outliers above the upper threshold separately from those below the lower threshold.",container:"body"}),assistantPanel.splitOutliersCheckboxControl=new _checkboxview2["default"]({id:"splitOutliersCheckboxControl",el:splitOutliersLabel,value:!1}).render(),assistantPanel.splitOutliersCheckboxControl.on("change",function(){Forms.setToken("outliersOverTimeToken",this.val()?'sum(isOutlierAbove) as "outliers above", sum(isOutlierBelow) as "outliers below"':"sum(isOutlier) as outliers"),Searches.getSearchManager(managerId).cancel().startSearch()}),splitOutliersLabel.append((0,_jquery2["default"])("<span>").text("Split outliers above and below threshold")),assistantPanel}(),outliersTablePanel=function(){var assistantPanel=new _Master2["default"]({el:_this.$el.find("#outliersTablePanel"),title:"Data and Outliers",viz:_tableview2["default"],vizOptions:{id:"outliersTable",managerid:"outliersVizSearch",sortKey:"isOutlier",sortDirection:"desc",drilldown:"none"}}),HighlightedTableRender=_tableview2["default"].BaseCellRenderer.extend({canRender:function(){return!0},render:function($td,cell){if($td.text(cell.value),"isOutlier"===cell.field){var icon="check",colorIndex=7;"1"===cell.value&&(icon="alert",colorIndex=1,$td.attr("data-outlier",!0)),$td.addClass("icon-inline").html(_underscoreMltk2["default"].template('<i class="icon-<%-icon%>" style="color: <%-color%>"></i> &#160 <%- text %> ',{icon:icon,text:cell.value,color:(0,_ColorPalette.getColorByIndex)(colorIndex)}))}else cell.field===Forms.getToken("outlierVariableToken")&&$td.attr("data-outlier-variable",!0);$td.addClass(TableUtils.columnTypeToClassName(cell.columnType))}});return assistantPanel.viz.addCellRenderer(new HighlightedTableRender),assistantPanel.viz.on("rendered",function(){assistantPanel.viz.$el.find("tbody tr td[data-outlier]").siblings("td[data-outlier-variable]").css("background-color",(0,_ColorPalette.getColorByIndex)(1))}),assistantPanel}(),outliersDistributionVizPanel=function(){var _vizOptions2,vizName="HistogramViz",HistogramViz=_visualizationregistry2["default"].getVisualizer(appName,vizName);return new _Master2["default"]({el:_this.$el.find("#outliersBarChartPanel"),title:"Data Distribution",tooltip:"The distance from the measure of centrality in units of threshold multiples. Values within the outlier bounds are shown inside the highlighted area.",viz:HistogramViz,vizOptions:(_vizOptions2={id:"outliersBarChartViz",managerid:"outliersBarChartVizSearch",height:400},_defineProperty(_vizOptions2,appName+"."+vizName+".yAxisLogarithmic",!0),_defineProperty(_vizOptions2,appName+"."+vizName+".columnPadding",!0),_defineProperty(_vizOptions2,appName+"."+vizName+".areaLabel","points within threshold"),_vizOptions2)})}(),outliersSplitCountPanel=function(){return new _Master2["default"]({el:_this.$el.find("#outliersSplitCountPanel"),title:"Outlier Split Value Distribution",tooltip:"The number of outliers per (combination of) split values.",viz:_tableview2["default"],vizOptions:{id:"outliersSplitCountTable",managerid:"outliersSplitCountSearch"}})}();return updateWindowSize(),this.assistantFormView.footer.controls.submitButton.on("submit",function(){if(!self.assistantFormView.footer.getDisabled()&&controlValidity.getAll()){currentSampleSearch=null;var outlierSearch=Searches.getSearchManager("outlierSearch");outlierSearch.cancel(),Searches.setSearchString(outlierSearch,["| loadjob $searchBarSearchJobIdToken$"].concat(outlierSearchSettings[getOutlierDetectionType()].search,[outlierFieldSearchStrings.both]).join(" ")),self.model.experiment?(updateExperiment(),self.model.experiment.save({},{success:function(model,response){outlierSearch.startSearch()},error:function(model,response){self.showErrorMessage(response.responseText)}})):outlierSearch.startSearch()}}),this.assistantFormView.searchBarControl.events.on("change",function(){Forms.clearChoiceView(outlierVariableControl,!0),Forms.unsetToken("outlierVariableToken"),updateForm()}),function(){var searchBarSearch=Searches.getSearchManager("searchBarSearch");searchBarSearch.on("onStartCallback",function(){self.hideErrorMessage(),self.hideResults()}),searchBarSearch.on("onDoneCallback",function(searchManager){Searches.startSearch("outlierVariableSearch")}),searchBarSearch.on("onErrorCallback",function(errorMessage){Forms.clearChoiceViewOptions(outlierVariableControl),self.showErrorMessage(errorMessage),self.hideResults()})}(),function(){Searches.setSearch("outlierVariableSearch",{searchString:(0,_compactTemplateString2["default"])(_templateObject2),targetJobIdTokenName:"outlierVariableSearchToken",onStartCallback:function(){self.hideErrorMessage()},onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()}})}(),function(){Searches.setSearch("splitByFieldsSearch",{searchString:(0,_compactTemplateString2["default"])(_templateObject3),onDoneCallback:function(){0===Searches.getResultCount(this)&&splitByFieldsControl.trigger("datachange-zero")},onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()}})}(),function(){function openInSearch(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch),"_blank")}function showSPL(){(0,_SearchStringDisplay.showSearchStringModal)("outliersTableSearchModal","Calculate the outliers",vizQueryArray,getFullSearchQueryComments(),self.model.searchInfo.get("baseTimerange"))}function onErrorCallback(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()}var vizQuerySearch=null,vizQueryArray=[];self.assistantFormView.footer.controls.openInSearchButton.on("click",openInSearch),self.assistantFormView.footer.controls.showSPLButton.on("click",showSPL),outliersTablePanel.openInSearchButton.on("click",openInSearch),outliersTablePanel.showSPLButton.on("click",showSPL),Searches.setSearch("outlierSearch",{autostart:!1,searchString:"",targetJobIdTokenName:"outlierSearchToken",onStartCallback:function(){self.hideErrorMessage(),updateForm(!0);var _getVizQuery=getVizQuery(),_getVizQuery2=_slicedToArray(_getVizQuery,2);vizQueryArray=_getVizQuery2[0],vizQuerySearch=_getVizQuery2[1],DrilldownLinker.setSearchDrilldown(outliersTablePanel.title,vizQuerySearch)},onDoneCallback:function(){self.showResults()},onDataCallback:function(data){var outlierVariableToken=Forms.getToken("outlierVariableToken"),outlierVariableIndex=data.fields.indexOf(outlierVariableToken),nonNumeric=data.rows.every(function(row){return!NumberValidator.validate(row[outlierVariableIndex])});if(nonNumeric)onErrorCallback('All values in "'+outlierVariableToken+'" are non-numeric. You may be able to analyze this data in the "Detect Categorical Outliers" assistant.'),
self.showDatasetPreview();else{var baseTimerange=self.model.searchInfo.get("baseTimerange"),collection={_time:parseInt((new Date).valueOf()/1e3,10),search_query:self.model.searchInfo.get("baseSearchString"),earliest_time:baseTimerange.earliest_time,latest_time:baseTimerange.latest_time,outlier_variable:Forms.getToken("outlierVariableToken"),threshold_method:Forms.getToken("thresholdMethodToken"),threshold_multiplier:Forms.getToken("thresholdMultiplierToken"),window_size:Forms.getToken("windowedAnalysisToken")?Forms.getToken("windowSizeToken"):0,use_current_point:Forms.getToken("useCurrentPointToken"),split_by_fields:Forms.getToken("splitByFieldsToken")};historySerializer.persist(Searches.getSid("outlierSearch"),collection),Searches.startSearch("outliersVizSearch"),Searches.startSearch("outliersBarChartVizSearch");var showOutliersOverTimeViz=null!=data&&null!=data.fields&&(0,_TimestampValidator.checkDataForTimestamps)(data.rows,data.fields.indexOf("_time"));showOutliersOverTimeViz?(outliersOverTimeVizPanel.show(),outliersOverTimeVizPanel.splitOutliersCheckboxControl.trigger("change")):outliersOverTimeVizPanel.hide();var showSplitByFieldsRow=Forms.getToken("splitByFieldsToken").length>0;showSplitByFieldsRow?(outliersSplitCountPanel.show(),Searches.startSearch("outliersSplitCountSearch")):outliersSplitCountPanel.hide(!0)}},onErrorCallback:onErrorCallback,onFinallyCallback:function(){updateForm(!1)}})}(),function(){Searches.setSearch("outliersCountSearch",{autostart:!0,targetJobIdTokenName:"outliersCountSearchToken",searchString:"| loadjob $outlierSearchToken$ | where isOutlier=1 | stats count",onDataCallback:function(data){var countIndex=data.fields.indexOf("count");data.rows.length>0&&countIndex>=0&&historySerializer.persist(Searches.getSid("outlierSearch"),{outliers_count:data.rows[0][countIndex]})}})}(),function(){var sharedSearchArray=["$splitByMacroToken$","| fields _time, $outlierVariableToken|s$, lowerBound, upperBound, isOutlier, *"],vizQuerySearch=null,vizQueryArray=[],vizOptions=DrilldownLinker.parseVizOptions({category:"custom",type:appName+".OutliersViz"});outliersVizPanel.openInSearchButton.on("click",function(){return window.open(DrilldownLinker.getUrl("search",vizQuerySearch,vizOptions),"_blank")}),outliersVizPanel.showSPLButton.on("click",function(){(0,_SearchStringDisplay.showSearchStringModal)("outliersVizSearchModal","Plot the outliers",vizQueryArray,getFullSearchQueryComments().concat(["use the `splitby()` macro to configure the visualization to display a split view","format the columns to be in the order expected by the Outliers Plot visualization"]),self.model.searchInfo.get("baseTimerange"),vizOptions)}),outliersVizPanel.scheduleAlertButton.on("click",function(){return new _OutlierAlertModal2["default"]({getSearchQuery:getFullSearchQueryArray}).render().appendTo((0,_jquery2["default"])("body")).show()}),Searches.setSearch("outliersVizSearch",{autostart:!1,searchString:["| loadjob $outlierSearchToken$"].concat(sharedSearchArray),onStartCallback:function(){outliersVizPanel.showLoadingOverlay();var _getVizQuery3=getVizQuery(sharedSearchArray),_getVizQuery4=_slicedToArray(_getVizQuery3,2);vizQueryArray=_getVizQuery4[0],vizQuerySearch=_getVizQuery4[1],DrilldownLinker.setSearchDrilldown(outliersVizPanel.title,vizQuerySearch,vizOptions)},onDataCallback:function(data){if(null!=data&&null!=data.fields&&null!=data.rows&&data.rows.length>0){var tableFields=data.fields.slice(0,5),timeIndex=tableFields.indexOf("_time"),hasTimestamps=timeIndex>=0&&null!=data.rows[0][timeIndex],spliced=tableFields.splice(timeIndex,1);hasTimestamps&&tableFields.splice.apply(tableFields,_toConsumableArray([tableFields.length,0].concat(spliced)));var splitByFieldsToken=Forms.getToken("splitByFieldsToken");tableFields.splice.apply(tableFields,_toConsumableArray([tableFields.length,0].concat(splitByFieldsToken))),outliersTablePanel.viz.settings.set("fields",tableFields)}},onFinallyCallback:function(){outliersVizPanel.hideLoadingOverlay()}})}(),function(){var sharedSearchArray=["$splitByEvalToken$","| timechart $outliersOverTimeToken$ $outliersOverTimeSplitByToken$"],vizQueryArray=[],vizQuerySearch=null,vizOptions=DrilldownLinker.parseVizOptions({category:"charting",type:"column"});vizOptions["display.visualizations.charting.chart.stackMode"]="stacked",outliersOverTimeVizPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQueryArray,vizOptions),"_blank")}),outliersOverTimeVizPanel.showSPLButton.on("click",function(){(0,_SearchStringDisplay.showSearchStringModal)("outliersOverTimeVizSearchModal","Plot the outlier count over time",vizQueryArray,getFullSearchQueryComments().concat(["combine the split-by fields into a single field for timechart","plot the outlier count over time"]),self.model.searchInfo.get("baseTimerange"),vizOptions)}),Searches.setSearch("outliersOverTimeVizSearch",{autostart:!1,searchString:["| loadjob $outlierSearchToken$"].concat([outlierFieldSearchStrings.split],sharedSearchArray),onStartCallback:function(){outliersOverTimeVizPanel.showLoadingOverlay();var _getVizQuery5=getVizQuery(sharedSearchArray,outliersOverTimeVizPanel.splitOutliersCheckboxControl.val()?"split":"both"),_getVizQuery6=_slicedToArray(_getVizQuery5,2);vizQueryArray=_getVizQuery6[0],vizQuerySearch=_getVizQuery6[1],DrilldownLinker.setSearchDrilldown(outliersOverTimeVizPanel.title,vizQuerySearch,vizOptions)},onFinallyCallback:function(){outliersOverTimeVizPanel.hideLoadingOverlay()}})}(),function(){function getVizOptions(){return DrilldownLinker.parseVizOptions({category:"custom",type:outliersDistributionVizPanel.viz.settings.attributes.type},outliersDistributionVizPanel.getVizOptions())}var vizQueryArray=[],vizQuerySearch=null,methodDeviationLabels={Avg:"standard deviations from mean",MAD:"median absolute deviations from median",IQR:"interquartile ranges from median"};outliersDistributionVizPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQueryArray,getVizOptions()),"_blank")}),outliersDistributionVizPanel.showSPLButton.on("click",function(){(0,_SearchStringDisplay.showSearchStringModal)("outliersBarChartVizSearchModal","Plot the data distribution",vizQueryArray,getFullSearchQueryComments().concat(["get the outlier distance from the appropriate bound","convert the distance to multiples of the threshold","chart the distance over the count"]),self.model.searchInfo.get("baseTimerange"),getVizOptions())});var sharedSearchArray=["| eval distance = max('$outlierVariableToken$' - $thresholdMidpointToken$, $thresholdMidpointToken$ - '$outlierVariableToken$')","| eval distance = if($thresholdDeviationToken$!=0, floor(distance/$thresholdDeviationToken$), 0)","| chart count over distance | makecontinuous distance"];Searches.setSearch("outliersBarChartVizSearch",{autostart:!1,searchString:["| loadjob $outlierSearchToken$"].concat(sharedSearchArray),onStartCallback:function(){outliersDistributionVizPanel.showLoadingOverlay();var _getVizQuery7=getVizQuery(sharedSearchArray),_getVizQuery8=_slicedToArray(_getVizQuery7,2);vizQueryArray=_getVizQuery8[0],vizQuerySearch=_getVizQuery8[1],outliersDistributionVizPanel.setVizOption("xAxisLabel",methodDeviationLabels[thresholdMethodControl.val()]),outliersDistributionVizPanel.setVizOption("areaStartPosition",-.5),outliersDistributionVizPanel.setVizOption("areaEndPosition",Forms.getToken("thresholdMultiplierToken")),DrilldownLinker.setSearchDrilldown(outliersDistributionVizPanel.title,vizQuerySearch,getVizOptions())},onFinallyCallback:function(){outliersDistributionVizPanel.hideLoadingOverlay()}})}(),function(){var vizQueryArray=[],vizQuerySearch=null;outliersSplitCountPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQueryArray),"_blank")}),outliersSplitCountPanel.showSPLButton.on("click",function(){(0,_SearchStringDisplay.showSearchStringModal)("outliersBarChartVizSearchModal","Plot the outlier size distribution",vizQueryArray,getFullSearchQueryComments().concat(['get the outlier count for each combination of "split by" values']),self.model.searchInfo.get("baseTimerange"))});var sharedSearchArray=['| stats sum(isOutlier) as "outlier count" $splitByFieldsQueryToken$','| sort -"outlier count"'];Searches.setSearch("outliersSplitCountSearch",{autostart:!1,searchString:["| loadjob $outlierSearchToken$"].concat(sharedSearchArray),onStartCallback:function(){var _getVizQuery9=getVizQuery(sharedSearchArray),_getVizQuery10=_slicedToArray(_getVizQuery9,2);vizQueryArray=_getVizQuery10[0],vizQuerySearch=_getVizQuery10[1],DrilldownLinker.setSearchDrilldown(outliersSplitCountPanel.title,vizQuerySearch)}})}(),this.sampleSearchDeferred.done(setCurrentSampleSearch),setTimeout(updateForm,0),this},controlsTemplate:'           \n        <div class="mlts-input">\n            <label>Field to analyze</label>\n            <div id="outlierVariableControl"></div>\n        </div>\n        <div class="mlts-input">\n            <label>Threshold method</label>\n            <div id="thresholdMethodControl"></div>\n        </div>\n        <div class="mlts-input">\n            <label>Threshold multiplier</label>\n            <div id="thresholdMultiplierControl"></div>\n        </div>\n        <div class="mlts-input" id="windowedAnalysisControlWrapper">\n            <div class="checkbox">\n                <label><div id="windowedAnalysisCheckboxControl"></div>Sliding window (# of values)</label>\n            </div>\n            <div class="mlts-input" id="windowSizeControl"></div>\n            <div class="checkbox">\n                <div id="currentPointCheckboxControl"></div>\n                <label>Include current point</label>\n            </div>\n        </div>\n        <div class="mlts-input">\n            <label>Fields to split by</label>\n            <div id="splitByFieldsControl"></div>\n        </div>\n    ',template:'        \n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                <div class="mlts-panel" id="outliersPanel"></div>\n            </div>\n        </div>\n        \n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                <div class="mlts-panel" id="outliersOverTimePanel"></div>\n            </div>\n        </div>\n        \n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                <div class="mlts-panel" id="outliersBarChartPanel"></div>\n            </div>\n        </div>\n        \n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                <div class="mlts-panel" id="outliersTablePanel"></div>\n            </div>\n        </div>\n        \n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                <div class="mlts-panel" id="outliersSplitCountPanel"></div>\n            </div>\n        </div>\n    '}),outlierDetectionView=new OutlierDetectionView;outlierDetectionView.deferreds.viewReady.done(function(layout){layout.getContainerElement().appendChild(outlierDetectionView.render().el)})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},291:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__("util/time")],__WEBPACK_AMD_DEFINE_RESULT__=function(exports,_time){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function checkDataForTimestamps(dataRows,timeIndex){var hasTimestamps=!1;if(null!=dataRows&&dataRows.length>0){var firstPoint=dataRows[0][timeIndex],lastPoint=dataRows.length>1?dataRows[dataRows.length-1][timeIndex]:null,firstPointHasTimestamp=null!=firstPoint&&!isNaN(_time2["default"].isoToDateObject(firstPoint).valueOf()),lastPointHasTimestamp=null!=lastPoint&&!isNaN(_time2["default"].isoToDateObject(lastPoint).valueOf());hasTimestamps=firstPointHasTimestamp&&lastPointHasTimestamp&&firstPoint!==lastPoint}return hasTimestamps}Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkDataForTimestamps=checkDataForTimestamps;var _time2=_interopRequireDefault(_time)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},292:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[module,exports,__webpack_require__("shim/jquery"),__webpack_require__(48),__webpack_require__("splunkjs/mvc/dropdownview"),__webpack_require__("splunkjs/mvc/textinputview"),__webpack_require__(237),__webpack_require__(246),__webpack_require__(247),__webpack_require__(235),__webpack_require__("views/shared/Modal")],__WEBPACK_AMD_DEFINE_RESULT__=function(module,exports,_jquery,_underscoreMltk,_dropdownview,_textinputview,_Messages,_NumberValidator,_AlertModal,_Forms,_Modal){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery2=_interopRequireDefault(_jquery),_underscoreMltk2=_interopRequireDefault(_underscoreMltk),_dropdownview2=_interopRequireDefault(_dropdownview),_textinputview2=_interopRequireDefault(_textinputview),Messages=_interopRequireWildcard(_Messages),NumberValidator=_interopRequireWildcard(_NumberValidator),_AlertModal2=_interopRequireDefault(_AlertModal),Forms=_interopRequireWildcard(_Forms),_Modal2=_interopRequireDefault(_Modal);exports["default"]=_Modal2["default"].extend({className:_Modal2["default"].CLASS_NAME+" "+_Modal2["default"].CLASS_MODAL_WIDE,initialize:function(options){this.options=_underscoreMltk2["default"].extend({onHiddenRemove:!0},this.options),_Modal2["default"].prototype.initialize.apply(this,arguments)},events:_jquery2["default"].extend({},_Modal2["default"].prototype.events,{"click .btn-primary":function(e){var _this=this;e.preventDefault();var button=(0,_jquery2["default"])(e.target);this.removeAlert();var minOutliersCount=this.controls.count.val(),isValid=NumberValidator.validate(minOutliersCount,{min:0});if(Messages.setFormInputStatus(this.controls.count,isValid),isValid){var searchString=Forms.parseTemplate(this.options.getSearchQuery(this.controls.type.val()).concat("| where isOutlier = 1").join("")),submitButtonText=button.text();button.attr("disabled",!0).text("Loading..."),new _AlertModal2["default"]({searchString:searchString}).done(function(alertModal){_this.shown?(_this.hide(),alertModal.model.alert.entry.content.set("ui.scheduled.resultsinput",minOutliersCount),alertModal.render().appendTo((0,_jquery2["default"])("body")).show()):alertModal.remove()}).fail(function(message){_this.setAlert(message),button.attr("disabled",!1).text(submitButtonText)})}else this.setAlert("Alert count must be a positive number.")},hide:function(){var _this2=this;Object.keys(this.controls).forEach(function(id){return _this2.controls[id].remove()})}}),render:function(){var _this3=this;return this.$el.html(_Modal2["default"].TEMPLATE),this.$el.addClass("outlier-alert-modal"),this.$(_Modal2["default"].HEADER_TITLE_SELECTOR).text("Schedule an alert"),this.alertWrapper=(0,_jquery2["default"])('<div class="mlts-modal-alert">'),this.$(_Modal2["default"].BODY_SELECTOR).prepend(this.alertWrapper),this.$(_Modal2["default"].BODY_SELECTOR).append(_Modal2["default"].FORM_HORIZONTAL),this.$(_Modal2["default"].BODY_FORM_SELECTOR).append('\n            <p>Alert me when the number of outliers </p>\n            <span class="outlier-alert-modal-type-control"></span>\n            <p>is greater than </p>\n            <span class="outlier-alert-modal-count-control"></span>            \n        ').addClass("mlts-modal-form-inline"),this.controls={type:new _dropdownview2["default"]({id:"outliersAlertModalTypeControl",el:this.$el.find(".outlier-alert-modal-type-control"),labelField:"label",valueField:"value",showClearButton:!1,choices:[{value:"both",label:"outside both thresholds"},{value:"above",label:"above the upper threshold"},{value:"below",label:"below the lower threshold"}],selectFirstChoice:!0}),count:new _textinputview2["default"]({id:"outliersAlertModalCountControl",el:this.$el.find(".outlier-alert-modal-count-control"),value:0})},Object.keys(this.controls).forEach(function(id){return _this3.controls[id].render()}),this.$(_Modal2["default"].FOOTER_SELECTOR).append(_Modal2["default"].BUTTON_CANCEL),this.$(_Modal2["default"].FOOTER_SELECTOR).append(_Modal2["default"].BUTTON_NEXT),this},setAlert:function(alertMessage,alertType){Messages.setAlert(this.alertWrapper,alertMessage,alertType,void 0,!0)},removeAlert:function(){Messages.removeAlert(this.alertWrapper,!0)}}),module.exports=exports["default"]}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});